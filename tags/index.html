---
layout: null
title: Tags
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }} — {{ site.title }}</title>
  <link href="{{ '/style.css' | relative_url }}" rel="stylesheet">
</head>
<body>
  <header>
    <nav>
      <a href="{{ '/' | relative_url }}">Home</a>
      <a href="{{ '/archive' | relative_url }}">Archive</a>
      <a href="{{ '/tags' | relative_url }}">Tags</a>
      <a href="{{ '/events' | relative_url }}">Events</a>
    </nav>
  </header>
  <div class="wrapper">
    {% assign all_tags = "" | split: "" %}
    {% assign tag_posts_map = "" | split: "" %}
    {% assign nested_tags_map = "" | split: "" %}

    {% for post in site.posts %}
      {% for tag in post.tags %}
        {% assign tag = tag | strip | downcase %}
        {% unless all_tags contains tag %}
          {% assign all_tags = all_tags | push: tag %}
        {% endunless %}
        
        {% if tag_posts_map[tag] == nil %}
          {% assign tag_posts_map = tag_posts_map | append: tag | append: ':' | append: post.url | append: ';' %}
        {% else %}
          {% assign tag_posts_map[tag] = tag_posts_map[tag] | append: post.url | append: ';' %}
        {% endif %}

        {% if tag contains '>' %}
          {% assign parent_tag = tag | split: '>' | first | strip %}
          {% if nested_tags_map[parent_tag] == nil %}
            {% assign nested_tags_map[parent_tag] = "" | split: "" %}
          {% endif %}
          {% unless nested_tags_map[parent_tag] contains tag %}
            {% assign nested_tags_map[parent_tag] = nested_tags_map[parent_tag] | push: tag %}
          {% endunless %}
        {% endif %}
      {% endfor %}
    {% endfor %}
    
    <div class="tag-page">
      <h1>{{ page.title }}</h1>
      <ul class="tag-list">
        {% for tag in all_tags %}
          {% assign tag_posts = tag_posts_map[tag] | split: ';' %}
          {% assign post_count = tag_posts | size %}
          {% if tag_posts.last == '' %}
            {% assign post_count = post_count | minus: 1 %}
          {% endif %}
          <li>
            <a href="#{{ tag | slugify }}">{{ tag }} ({{ post_count }})</a>
            {% if nested_tags_map[tag] %}
              <ul>
                {% assign child_tags = nested_tags_map[tag] %}
                {% for child_tag in child_tags %}
                  {% assign child_tag_posts = tag_posts_map[child_tag] | split: ';' %}
                  {% assign child_post_count = child_tag_posts | size %}
                  {% if child_tag_posts.last == '' %}
                    {% assign child_post_count = child_post_count | minus: 1 %}
                  {% endif %}
                  <li>
                    <a href="#{{ child_tag | slugify }}">{{ child_tag }} ({{ child_post_count }})</a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
    <main class="tagged-posts">
      {% for tag in all_tags %}
      <section class="search-link" id="{{ tag | slugify }}" aria-labelledby="{{ tag | slugify }}-heading">
        <h2 id="{{ tag | slugify }}-heading">
          {{ tag }}
          <a href="#" class="back-to-top" aria-label="Back to top">↑</a>
        </h2>
        <ul>
          {% for post_url in tag_posts %}
            {% if post_url != '' %}
            <li>
              <a href="{{ post_url }}">{{ post_url }}</a>
            </li>
            {% endif %}
          {% endfor %}
        </ul>
      </section>
      {% if nested_tags_map[tag] %}
        {% assign child_tags = nested_tags_map[tag] %}
        {% for child_tag in child_tags %}
        <section class="search-link" id="{{ child_tag | slugify }}" aria-labelledby="{{ child_tag | slugify }}-heading">
          <h3 id="{{ child_tag | slugify }}-heading">
            {{ child_tag }}
            <a href="#" class="back-to-top" aria-label="Back to top">↑</a>
          </h3>
          <ul>
            {% assign child_tag_posts = tag_posts_map[child_tag] | split: ';' %}
            {% for post_url in child_tag_posts %}
              {% if post_url != '' %}
              <li>
                <a href="{{ post_url }}">{{ post_url }}</a>
              </li>
              {% endif %}
            {% endfor %}
          </ul>
        </section>
        {% endfor %}
      {% endif %}
      {% endfor %}
    </main>
  </div>
</body>
</html>
