<!DOCTYPE html>
<html lang="en">    
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>
    
      AWS PushSafer billing alarm — infoBAG
    
  </title>

  <link rel="canonical" href="/aws-pushsafer-billing-alarm/">  
  <link rel="alternate" type="application/rss+xml" title="infoBAG" href="/rss.xml">

  <meta property="og:site_name" content="infoBAG">
  <meta property="og:title" content="AWS PushSafer billing alarm">
  <meta property="og:type" content="article">
  <meta property="og:url" content="/aws-pushsafer-billing-alarm/">
  
  

  
    <meta property="article:published_time" content="2024-07-25T00:00:00+00:00">
    <meta property="article:author" content="">
  

  
    <meta itemprop="keywords" content="software>cloud">
    
      <meta property="article:tag" content="software>cloud">
    
  

  <link href="/style.css" rel="stylesheet">
  <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
  <script src="/pagefind/pagefind-ui.js"></script>
  <script type="module">
    import PagefindHighlight from '/pagefind/pagefind-highlight.js';
    new PagefindHighlight({ highlightParam: "highlight" });
  </script>
  <script src="/assets/js/search.js" defer></script>
  <script src="/assets/js/prism.js" defer></script>
</head>
<body class="post-wrapper">  
  <a class="search-input-block" id="search"></a>
  <article class="post">
  <header>
    <nav aria-label="Main navigation">
  <div class="header-container">
    <a class="internal-link" href="/">
      <img src="https://raw.githubusercontent.com/marioseixas/marioseixas.github.io/main/assets/Sudden_Death_Rune.gif" class="favicon">
    </a>
    <a href="https://ib.bsb.br/archive">
      <img src="https://raw.githubusercontent.com/marioseixas/marioseixas.github.io/main/favicon.ico" class="favicon">
    </a>
    <a href="https://ib.bsb.br/tags">
      <img src="https://raw.githubusercontent.com/marioseixas/marioseixas.github.io/main/assets/Label.gif" class="favicon">
    </a>
    <a href="https://ib.bsb.br/events">
      <img src="https://raw.githubusercontent.com/marioseixas/marioseixas.github.io/main/assets/Paralyse_Rune.gif" class="favicon">
    </a>      
  </div>
    </nav>
  </header>
  <div class="post-heading">
    <h1 class="post-title">AWS PushSafer billing alarm</h1>
    <div class="search-link">
        <span>
          <span class="tags">
            <time datetime="2024-07-25T00:00:00+00:00">
              · 25 Jul 2024
            </time>
            
            &rightarrowtail;
            <time datetime="2024-08-23T02:55:47+00:00">
                23 Aug 2024
              </time>
            
          </span>          
          
            <span>
              · Tags:
              
                <a href="/tags/#software-cloud" class="tag">software>cloud</a>
              
            </span>
                    
          
            <span class="tags">
              · Edit: aberto.
            </span>
                    
          <a href="https://github.com/marioseixas/marioseixas.github.io/edit/main/_posts/2024-07-25-aws-pushsafer-billing-alarm.md" target="_blank" rel="noopener noreferrer">
            · Improve this
          </a>
          <a href="https://github.com/marioseixas/marioseixas.github.io/commits/main/_posts/2024-07-25-aws-pushsafer-billing-alarm.md" target="_blank" rel="noopener noreferrer">
            · Revision history
          </a>
        </span>
      </div>
    <main class="post-content-body">      
      
    <h3 id="enabling-billing-alerts">Enabling Billing Alerts</h3>

<p>Before creating a billing alarm, you must enable billing alerts to monitor your estimated AWS charges. This process involves enabling billing metric data collection, which cannot be disabled once activated, although you can delete any billing alarms you create. Here are the steps to enable billing alerts:</p>

<ol>
  <li><strong>Sign In</strong>: Ensure you are signed in using account root user credentials or as an IAM user with permission to view billing information.</li>
  <li><strong>Open AWS Billing Console</strong>: Navigate to the AWS Billing console at <a href="https://console.aws.amazon.com/billing/home?#/">https://console.aws.amazon.com/billing/</a>.</li>
  <li><strong>Billing Preferences</strong>: In the navigation pane, select <strong>Billing Preferences</strong>.</li>
  <li><strong>Edit Alert Preferences</strong>: Under <strong>Alert preferences</strong>, click <strong>Edit</strong>.</li>
  <li><strong>Enable Alerts</strong>: Choose <strong>Receive CloudWatch Billing Alerts</strong>.</li>
  <li><strong>Save Preferences</strong>: Click <strong>Save preferences</strong>.</li>
</ol>

<p>After enabling billing alerts, it takes approximately 15 minutes before you can view billing data and set billing alarms.</p>

<h3 id="creating-a-billing-alarm">Creating a Billing Alarm</h3>

<p>Once billing alerts are enabled, you can create a billing alarm to receive notifications when your estimated charges exceed a specified threshold. Follow these steps to create a billing alarm using the CloudWatch console:</p>

<ol>
  <li><strong>Open CloudWatch Console</strong>: Go to <a href="https://console.aws.amazon.com/cloudwatch/">https://console.aws.amazon.com/cloudwatch/</a>.</li>
  <li><strong>Navigate to Alarms</strong>: In the navigation pane, select <strong>Alarms</strong>, then <strong>All alarms</strong>.</li>
  <li><strong>Create Alarm</strong>: Click <strong>Create alarm</strong>.</li>
  <li><strong>Select Metric</strong>: Choose <strong>Select metric</strong>, then under <strong>Browse</strong>, select <strong>Billing</strong> and <strong>Total Estimated Charge</strong>.</li>
  <li><strong>Choose Metric</strong>: Select the <strong>EstimatedCharges</strong> metric and click <strong>Select metric</strong>.</li>
  <li><strong>Configure Alarm</strong>:
    <ul>
      <li><strong>Statistic</strong>: Choose <strong>Maximum</strong>.</li>
      <li><strong>Period</strong>: Set to <strong>6 hours</strong>.</li>
      <li><strong>Threshold Type</strong>: Select <strong>Static</strong>.</li>
      <li><strong>Threshold Value</strong>: Define the value that triggers the alarm, e.g., <code class="language-plaintext highlighter-rouge">200</code> USD.</li>
    </ul>
  </li>
  <li><strong>Additional Configuration</strong>:
    <ul>
      <li><strong>Datapoints to Alarm</strong>: Specify <strong>1 out of 1</strong>.</li>
      <li><strong>Missing Data Treatment</strong>: Choose <strong>Treat missing data as missing</strong>.</li>
    </ul>
  </li>
  <li><strong>Notification Setup</strong>: Under <strong>Notification</strong>, ensure <strong>In alarm</strong> is selected. Specify an Amazon SNS topic to be notified when the alarm is in the <code class="language-plaintext highlighter-rouge">ALARM</code> state. This can include your email address for notifications.</li>
  <li><strong>Finalize Alarm</strong>: Enter a name and optional description for your alarm, review the configuration, and choose <strong>Create alarm</strong>.</li>
</ol>

<h3 id="automating-billing-alerts-with-push-notifications">Automating Billing Alerts with Push Notifications</h3>

<p>To automate billing alerts and receive them as push notifications on your iPhone using a service like Pushsafer, follow these steps:</p>

<ol>
  <li><strong>Create an SNS Topic</strong>:
    <ul>
      <li><strong>Open SNS Console</strong>: Go to the <a href="https://console.aws.amazon.com/sns/v3/home">Amazon SNS Console</a>.</li>
      <li><strong>Create Topic</strong>: Click <strong>Create topic</strong> and choose <strong>Standard</strong>. Enter a name for your topic and click <strong>Create topic</strong>.</li>
    </ul>
  </li>
  <li><strong>Create Subscription</strong>:
    <ul>
      <li><strong>Protocol</strong>: Select <strong>HTTPS</strong>.</li>
      <li><strong>Endpoint</strong>: Enter the Pushsafer API URL in the format <code class="language-plaintext highlighter-rouge">https://www.pushsafer.com/api</code>.</li>
      <li><strong>Attributes</strong>: Add the necessary attributes, including your Pushsafer private key.</li>
    </ul>
  </li>
  <li><strong>Confirm Subscription</strong>: Pushsafer will send a confirmation request to the specified endpoint. Confirm the subscription in your Pushsafer account.</li>
  <li><strong>Attach SNS Topic to CloudWatch Alarm</strong>: When setting up the CloudWatch alarm, specify the SNS topic created above for notifications.</li>
</ol>

<h3 id="integrating-two-factor-authentication-2fa">Integrating Two-Factor Authentication (2FA)</h3>

<p>To enhance security, integrate two-factor authentication (2FA) for accessing your AWS account. This ensures that only authorized users can modify billing alerts and access sensitive billing information. Here’s how to enable 2FA:</p>

<ol>
  <li><strong>Sign In to AWS Management Console</strong>: Use your root account or an IAM user with administrative privileges.</li>
  <li><strong>Navigate to IAM</strong>: Go to the Identity and Access Management (IAM) console.</li>
  <li><strong>Select Users</strong>: Choose the user for whom you want to enable 2FA.</li>
  <li><strong>Security Credentials</strong>: Under the <strong>Security credentials</strong> tab, choose <strong>Manage MFA device</strong>.</li>
  <li><strong>Choose MFA Device</strong>: Select the type of MFA device you want to use (e.g., virtual MFA device, U2F security key).</li>
  <li><strong>Configure Device</strong>: Follow the on-screen instructions to configure the MFA device. This typically involves scanning a QR code with an authenticator app and entering the generated code.</li>
</ol>
<ul><li><a href="#enabling-billing-alerts">Enabling Billing Alerts</a></li><li><a href="#creating-a-billing-alarm">Creating a Billing Alarm</a></li><li><a href="#automating-billing-alerts-with-push-notifications">Automating Billing Alerts with Push Notifications</a></li><li><a href="#integrating-two-factor-authentication-2fa">Integrating Two-Factor Authentication (2FA)</a></li></ul>
      <h3 id="enabling-billing-alerts">
  
  
     <a href="#enabling-billing-alerts">#</a>Enabling Billing Alerts
  
  <a href="#" class="back-to-top" aria-label="Back to top">
  <img src="/assets/gold.ico" alt="gold icon">
</a>
</h3>
      

<p>Before creating a billing alarm, you must enable billing alerts to monitor your estimated AWS charges. This process involves enabling billing metric data collection, which cannot be disabled once activated, although you can delete any billing alarms you create. Here are the steps to enable billing alerts:</p>

<ol>
  <li><strong>Sign In</strong>: Ensure you are signed in using account root user credentials or as an IAM user with permission to view billing information.</li>
  <li><strong>Open AWS Billing Console</strong>: Navigate to the AWS Billing console at <a href="https://console.aws.amazon.com/billing/home?#/">https://console.aws.amazon.com/billing/</a>.</li>
  <li><strong>Billing Preferences</strong>: In the navigation pane, select <strong>Billing Preferences</strong>.</li>
  <li><strong>Edit Alert Preferences</strong>: Under <strong>Alert preferences</strong>, click <strong>Edit</strong>.</li>
  <li><strong>Enable Alerts</strong>: Choose <strong>Receive CloudWatch Billing Alerts</strong>.</li>
  <li><strong>Save Preferences</strong>: Click <strong>Save preferences</strong>.</li>
</ol>

<p>After enabling billing alerts, it takes approximately 15 minutes before you can view billing data and set billing alarms.</p>
<h3 id="creating-a-billing-alarm">
  
  
     <a href="#creating-a-billing-alarm">#</a>Creating a Billing Alarm
  
  <a href="#" class="back-to-top" aria-label="Back to top">
  <img src="/assets/gold.ico" alt="gold icon">
</a>
</h3>
      

<p>Once billing alerts are enabled, you can create a billing alarm to receive notifications when your estimated charges exceed a specified threshold. Follow these steps to create a billing alarm using the CloudWatch console:</p>

<ol>
  <li><strong>Open CloudWatch Console</strong>: Go to <a href="https://console.aws.amazon.com/cloudwatch/">https://console.aws.amazon.com/cloudwatch/</a>.</li>
  <li><strong>Navigate to Alarms</strong>: In the navigation pane, select <strong>Alarms</strong>, then <strong>All alarms</strong>.</li>
  <li><strong>Create Alarm</strong>: Click <strong>Create alarm</strong>.</li>
  <li><strong>Select Metric</strong>: Choose <strong>Select metric</strong>, then under <strong>Browse</strong>, select <strong>Billing</strong> and <strong>Total Estimated Charge</strong>.</li>
  <li><strong>Choose Metric</strong>: Select the <strong>EstimatedCharges</strong> metric and click <strong>Select metric</strong>.</li>
  <li><strong>Configure Alarm</strong>:
    <ul>
      <li><strong>Statistic</strong>: Choose <strong>Maximum</strong>.</li>
      <li><strong>Period</strong>: Set to <strong>6 hours</strong>.</li>
      <li><strong>Threshold Type</strong>: Select <strong>Static</strong>.</li>
      <li><strong>Threshold Value</strong>: Define the value that triggers the alarm, e.g., <code class="language-plaintext highlighter-rouge">200</code> USD.</li>
    </ul>
  </li>
  <li><strong>Additional Configuration</strong>:
    <ul>
      <li><strong>Datapoints to Alarm</strong>: Specify <strong>1 out of 1</strong>.</li>
      <li><strong>Missing Data Treatment</strong>: Choose <strong>Treat missing data as missing</strong>.</li>
    </ul>
  </li>
  <li><strong>Notification Setup</strong>: Under <strong>Notification</strong>, ensure <strong>In alarm</strong> is selected. Specify an Amazon SNS topic to be notified when the alarm is in the <code class="language-plaintext highlighter-rouge">ALARM</code> state. This can include your email address for notifications.</li>
  <li><strong>Finalize Alarm</strong>: Enter a name and optional description for your alarm, review the configuration, and choose <strong>Create alarm</strong>.</li>
</ol>
<h3 id="automating-billing-alerts-with-push-notifications">
  
  
     <a href="#automating-billing-alerts-with-push-notifications">#</a>Automating Billing Alerts with Push Notifications
  
  <a href="#" class="back-to-top" aria-label="Back to top">
  <img src="/assets/gold.ico" alt="gold icon">
</a>
</h3>
      

<p>To automate billing alerts and receive them as push notifications on your iPhone using a service like Pushsafer, follow these steps:</p>

<ol>
  <li><strong>Create an SNS Topic</strong>:
    <ul>
      <li><strong>Open SNS Console</strong>: Go to the <a href="https://console.aws.amazon.com/sns/v3/home">Amazon SNS Console</a>.</li>
      <li><strong>Create Topic</strong>: Click <strong>Create topic</strong> and choose <strong>Standard</strong>. Enter a name for your topic and click <strong>Create topic</strong>.</li>
    </ul>
  </li>
  <li><strong>Create Subscription</strong>:
    <ul>
      <li><strong>Protocol</strong>: Select <strong>HTTPS</strong>.</li>
      <li><strong>Endpoint</strong>: Enter the Pushsafer API URL in the format <code class="language-plaintext highlighter-rouge">https://www.pushsafer.com/api</code>.</li>
      <li><strong>Attributes</strong>: Add the necessary attributes, including your Pushsafer private key.</li>
    </ul>
  </li>
  <li><strong>Confirm Subscription</strong>: Pushsafer will send a confirmation request to the specified endpoint. Confirm the subscription in your Pushsafer account.</li>
  <li><strong>Attach SNS Topic to CloudWatch Alarm</strong>: When setting up the CloudWatch alarm, specify the SNS topic created above for notifications.</li>
</ol>
<h3 id="integrating-two-factor-authentication-2fa">
  
  
     <a href="#integrating-two-factor-authentication-2fa">#</a>Integrating Two-Factor Authentication (2FA)
  
  <a href="#" class="back-to-top" aria-label="Back to top">
  <img src="/assets/gold.ico" alt="gold icon">
</a>
</h3>
      

<p>To enhance security, integrate two-factor authentication (2FA) for accessing your AWS account. This ensures that only authorized users can modify billing alerts and access sensitive billing information. Here’s how to enable 2FA:</p>

<ol>
  <li><strong>Sign In to AWS Management Console</strong>: Use your root account or an IAM user with administrative privileges.</li>
  <li><strong>Navigate to IAM</strong>: Go to the Identity and Access Management (IAM) console.</li>
  <li><strong>Select Users</strong>: Choose the user for whom you want to enable 2FA.</li>
  <li><strong>Security Credentials</strong>: Under the <strong>Security credentials</strong> tab, choose <strong>Manage MFA device</strong>.</li>
  <li><strong>Choose MFA Device</strong>: Select the type of MFA device you want to use (e.g., virtual MFA device, U2F security key).</li>
  <li><strong>Configure Device</strong>: Follow the on-screen instructions to configure the MFA device. This typically involves scanning a QR code with an authenticator app and entering the generated code.</li>
</ol>

    </main>
    </div>  
  </article>
  <hr>
  <a href="#" class="back-to-top" aria-label="Back to top">
    <img src="/assets/gold.ico" alt="gold icon">
  </a>
      
</body>  
</html>
