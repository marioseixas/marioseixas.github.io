---
categories:
  - Code
tags:
  - linux
  - scripts
comment: 
info: fechado.
date: '2024-02-22'
type: post
layout: post
published: true
slug: cat-files
title: 'cat files contents [script]'

---

```

#!/bin/bash

# Define the root search directory and destination directory for text files
SEARCH_DIR="/root/Documents"
DEST_DIR="/root/Downloads"
FINAL_FILE="${DEST_DIR}/final_concatenated_file.txt"
TEMP_FILE="${DEST_DIR}/temp_file_list.txt"

# Function to process a file and extract its content
process_file() {
    local file="$1"
    local text_file_path="$2"

    case "${file##*.}" in
        pdf)
            pdftotext "$file" "$text_file_path" 2>/dev/null
            ;;
        docx)
            pandoc "$file" -t plain -o "$text_file_path" 2>/dev/null
            ;;
        *)
            cat "$file" > "$text_file_path" 2>/dev/null
            ;;
    esac
}

# Function to concatenate text files into the final file
concatenate_files() {
    local text_file_path="$1"

    echo '*' >> "$FINAL_FILE"
    cat "$text_file_path" >> "$FINAL_FILE" 2>/dev/null
}

# Function to cleanup temporary text files
cleanup_temp_files() {
    find "$DEST_DIR" -type f -name "*.txt" ! -name "$(basename "$FINAL_FILE")" -delete
}

# Clear the final file if it already exists
> "$FINAL_FILE"

# Find all files in the directory and subdirectories and store them in a temporary file
find "$SEARCH_DIR" -type f > "$TEMP_FILE"

# Process each file from the temporary file
while IFS= read -r file; do
    # Generate a text file name based on the original file name
    text_file_name=$(echo "$file" | sed 's/[^a-zA-Z0-9]/_/g')
    text_file_path="${DEST_DIR}/${text_file_name}.txt"

    # Process the file and extract its content
    process_file "$file" "$text_file_path"

    # Concatenate the text file content to the final file
    concatenate_files "$text_file_path"
done < "$TEMP_FILE"

# Cleanup temporary text files and the temporary file list
cleanup_temp_files
rm -f "$TEMP_FILE"

# Inform the user that the process is completed
echo "Process completed. All files have been processed and concatenated into ${FINAL_FILE}."

```
