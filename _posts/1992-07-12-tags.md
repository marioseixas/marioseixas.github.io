---
layout: default
slug: tags
---
import json

with open('assets/data/processed_tags.json', 'r') as f:
    processed_tags = json.load(f)

sorted_tags = sorted(processed_tags.keys())

output = '<aside class="tag-list" aria-label="List of all tags">\n    <ul>\n'
for tag in sorted_tags:
    tag_data = processed_tags[tag]
    has_highlighted_post = False
    for post in tag_data['posts']:
        if post['highlighted']:
            has_highlighted_post = True
            break
    if has_highlighted_post:
        output += f'        <li>\n            <a href="#{tag | slugify}" aria-label="Tag {tag} with {len(tag_data["posts"])} posts">\n                {tag} ({len(tag_data["posts"])})\n            </a>\n        </li>\n'
output += '    </ul>\n</aside>\n<div class="tagged-posts">\n'
for tag in sorted_tags:
    tag_data = processed_tags[tag]
    output += f'    <aside id="{tag | slugify}" aria-labelledby="{tag | slugify}-heading">\n        <h2 id="{tag | slugify}-heading">\n            <a href="#" class="back-to-top" aria-label="Back to top">â‡§</a>\n            {tag}\n        </h2>\n'
    if tag_data['parents']:
        output += '        <strong>Parent tags:</strong>\n            <ul>\n'
        for parent in tag_data['parents']:
            output += f'                <li>\n                    <a href="#{parent | slugify}" aria-label="Parent tag {parent}">{parent}</a>\n                </li>\n'
        output += '            </ul>\n'
    if tag_data['children']:
        output += '      <strong>Child tags:</strong>\n            <ul>\n'
        for child in tag_data['children']:
            output += f'                <li>\n                    <a href="#{child | slugify}" aria-label="Child tag {child}">{child}</a>\n                </li>\n'
        output += '            </ul>\n'
    if tag_data['related']:
        output += '      <strong>Related tags:</strong>\n            <ul>\n'
        for related_tag, count in tag_data['related'].items():
            output += f'                <li>\n                    <a href="#{related_tag | slugify}" aria-label="Related tag {related_tag}">\n                      {related_tag}\n                      ({count})\n                    </a>\n                </li>\n'
        output += '            </ul>\n'
    output += '        <ul>\n'
    for post in tag_data['posts']:
        output += f'            <li>\n                <a href="{post["url"]}">\n'
        if post['highlighted']:
            output += f'                    <mark>{post["title"]}</mark>\n'
        else:
            output += f'                    {post["title"]}\n'
        output += f'                </a>\n                <time datetime="{post["date"] | date_to_xmlschema}">{post["date"] | date: "%B %d, %Y"}</time>\n            </li>\n'
    output += '        </ul>\n    </aside>\n'
output += '</div>'

print(output)
